<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <title>📚 Chinmaya Smart Library</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS & Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        .sidebar a:nth-child(1) {
            background-color: #ff6f61;
        }

        /* Dashboard */
        .sidebar a:nth-child(2) {
            background-color: #8adb07;
        }

        /* Accounts */
        .sidebar a:nth-child(3) {
            background-color: #50c700;
        }

        /* Books */
        .sidebar a:nth-child(4) {
            background-color: #f57f17;
        }

        /* Book Entry */
        .sidebar a:nth-child(5) {
            background-color: #c2185b;
        }

        /* Issue / Return */
        .sidebar a:nth-child(6) {
            background-color: #303f9f;
        }

        /* Reports */
        .sidebar a:nth-child(7) {
            background-color: #024b18;
        }

        /* Upload Excel */
        .sidebar a:nth-child(8) {
            background-color: #0ea2ed;
        }

        /* Events */
        .sidebar a:nth-child(9) {
            background-color: #d84315;
        }

        /* News */
        .sidebar a:nth-child(10) {
            background-color: #d208ba;
        }

        /* Ask Librarian */
        .sidebar a:nth-child(11) {
            background-color: #0017e6;
        }

        /* Login */
        .sidebar a:nth-child(12) {
            background-color: #d10707;
        }

        /* Gallery */
        .sidebar a:nth-child(13) {
            background-color: #c0ca33;
        }

        /* Daily Report */
        .sidebar a:nth-child(14) {
            background-color: #62039c;
        }

        /* AI Assistant */
        .sidebar a:nth-child(15) {
            background-color: #fe9900;
        }

        /* Announcements */
        .sidebar a:nth-child(16) {
            background-color: #e73600;
        }

        /* Search */

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f3e5f5, #e3f2fd);
            min-height: 100vh;
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 2rem;
            background: linear-gradient(to right, #6a1b9a, #283593);
            color: white;
            position: relative;
            box-shadow: 0 2px 8px rgb(0 0 0 / 0.25);
            flex-wrap: wrap;
        }

        header img.logo {
            height: 80px;
            width: 80px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(156, 96, 96, 0.4);
        }

        .header-text {
            flex: 1;
            text-align: center;
            min-width: 200px;
            margin: 0 1rem;
        }

        .header-text h1 {
            font-size: 1.8rem;
            margin-bottom: 0.2rem;
        }

        .profile-icon {
            position: relative;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid white;
            cursor: pointer;
        }

        .profile-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .d-flex.main-wrapper {
            min-height: calc(100vh - 140px);
            gap: 1rem;
            padding: 1rem 2rem;
            flex-wrap: nowrap;
            background: transparent;
        }

        /* Sidebar */
        .sidebar {
            flex: 0 0 240px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(6px);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 1rem;
            box-shadow: 0 4px 20px rgb(0 0 0 / 0.1);
            height: fit-content;
            max-height: 85vh;
            overflow-y: auto;
        }

        .sidebar a {
            display: block;
            font-weight: 600;
            padding: 10px 14px;
            border-radius: 10px;
            color: #a4d929;
            text-decoration: none;
            transition: background-color 0.3s ease, color 0.3s ease;
            font-size: 1rem;
        }

        .sidebar a:hover {
            background-color: #6a1b9a;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        /* Main content */
        .main-content {
            flex: 1;
            background: #ffffffcc;
            padding: 1.5rem 2rem;
            border-radius: 15px;
            box-shadow: 0 6px 18px rgb(0 0 0 / 0.15);
            overflow-y: auto;
            max-height: 85vh;
        }

        .carousel .carousel-inner img {
            border-radius: 15px;
            max-height: 280px;
            object-fit: cover;
            width: 100%;
        }

        .news-strip {
            background: linear-gradient(to right, #ffeb3b, #fbc02d);
            font-weight: 700;
            padding: 0.9rem;
            border-radius: 10px;
            text-align: center;
            margin: 1.5rem 0;
            font-size: 1.1rem;
            color: #444;
            box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
        }

        .stats-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: white;
            padding: 1.25rem 2rem;
            border-radius: 15px;
            min-width: 180px;
            text-align: center;
            box-shadow: 0 6px 18px rgb(0 0 0 / 0.2);
            font-weight: 600;
            font-size: 1.1rem;
            color: #4a148c;
            user-select: none;
            transition: transform 0.2s ease;
        }

        .stat-card:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 30px rgb(0 0 0 / 0.25);
        }

        .latest-section {
            margin-bottom: 2rem;
        }

        .latest-section h3 {
            color: #23e45a;
            margin-bottom: 1rem;
            font-weight: 700;
            text-align: center;
            user-select: none;
        }

        .latest-item {
            background: #e6e7e4;
            margin: 6px 0;
            padding: 12px 15px;
            border-radius: 12px;
            font-weight: 500;
            box-shadow: 0 2px 10px rgb(0 0 0 / 0.1);
            user-select: text;
        }

        /* Floating search */
        .floating-search {
            position: fixed;
            top: 110px;
            right: 30px;
            width: 280px;
            z-index: 1100;
            box-shadow: 0 4px 15px rgba(72, 180, 1, 0.25);
            border-radius: 12px;
            overflow: hidden;
        }

        .floating-search input {
            width: 100%;
            padding: 10px 15px;
            font-size: 1rem;
            border: none;
            outline: none;
            box-shadow: none;
            border-radius: 12px;
            animation: pulse 3s infinite;
        }

        /* Floating action button */
        .fab {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: #dfd2e7;
            color: rgb(16, 112, 209);
            border-radius: 50%;
            width: 56px;
            height: 56px;
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(1, 99, 77, 0.6);
            transition: background-color 0.3s ease;
            user-select: none;
            z-index: 1200;
        }

        .fab:hover {
            background-color: #b9f09c;
        }

        footer {
            background: #ecebed;
            color: rgb(35, 11, 219);
            padding: 1.8rem 1rem;
            text-align: center;
            user-select: none;
            font-size: 0.9rem;
            letter-spacing: 0.03em;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(147, 186, 2, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(228, 71, 3, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(15, 243, 49, 0);
            }
        }

        /* Scrollbar for sidebar and main content */
        .sidebar::-webkit-scrollbar,
        .main-content::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-thumb,
        .main-content::-webkit-scrollbar-thumb {
            background-color: rgba(87, 245, 20, 0.3);
            border-radius: 4px;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .d-flex.main-wrapper {
                flex-wrap: wrap;
            }

            .sidebar {
                width: 100%;
                max-height: none;
                flex: unset;
                flex-direction: row;
                overflow-x: auto;
                gap: 0.5rem;
            }

            .sidebar a {
                flex: 1 0 auto;
                font-size: 0.9rem;
                padding: 8px 10px;
                text-align: center;
            }

            .main-content {
                width: 100%;
                max-height: none;
                margin-top: 1rem;
                padding: 1rem 1rem;
            }
        }
    </style>
</head>

<body>
    <header>
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="School Logo" class="logo" />
        <div class="header-text">
            <h1>Chinmaya Vidyalaya Senior Secondary School – Tirupati</h1>
            <p>📘 Chinmaya Smart Library Portal</p>
            <p id="datetime" style="font-size: 0.9rem;"></p>
        </div>
        <div class="profile-icon" title="User Profile">
            <img src="{{ url_for('static', filename='images/profile.jpg') }}" alt="User Profile" />
        </div>
    </header>

    <div class="d-flex main-wrapper">
        <nav class="sidebar" aria-label="Main Navigation">
            <a href="/dashboard" class="btn btn-outline-danger">📊 Dashboard</a>
            <a href="/accounts" class="btn btn-outline-primary">👤 Accounts</a>
            <a href="/books_dashboard" class="btn btn-outline-info">📚 Books</a>
            <a href="/book_entry" class="btn btn-outline-success">📘 Book Entry</a>
            <a href="/issue" class="btn btn-outline-warning">🔁 Issue / Return</a>
            <a href="{{ url_for('view_users') }}" class="btn btn-success">📑 View All Registered Users</a>
            <a href="/reports" class="btn btn-outline-dark">📈 Reports</a>
            <a href="/upload_excel" class="btn btn-outline-secondary">📂 Upload Excel</a>
            <a href="/events" class="btn btn-outline-success">📆 Events</a>
            <a href="/news" class="btn btn-outline-primary">📰 News</a>
            <a href="/help" class="btn btn-outline-danger">💬 Ask Librarian</a>
            <a href="/login" class="btn btn-outline-secondary">🔐 Login</a>
            <a href="/gallery" class="btn btn-outline-info">🖼️ Gallery</a>
            <a href="/daily_report" class="btn btn-outline-warning">📑 Daily Report</a>
            <a href="/ai_assist" class="btn btn-outline-success">🤖 AI Assistant</a>
            <a href="/announcements" class="btn btn-outline-danger">📢 Announcements</a>
            <a href="/search" class="btn btn-outline-dark">🔍 Search</a>
        </nav>

        <main class="main-content" role="main">
            <div id="carouselExample" class="carousel slide" data-bs-ride="carousel" data-aos="fade-up">
                <div class="carousel-inner rounded-4 shadow-sm">
                    <div class="carousel-item active">
                        <img src="{{ url_for('static', filename='images/library1.jpg') }}" class="d-block w-100"
                            alt="Library Image 1" />
                    </div>
                    <div class="carousel-item">
                        <img src="{{ url_for('static', filename='images/library2.jpg') }}" class="d-block w-100"
                            alt="Library Image 2" />
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample"
                    data-bs-slide="prev" aria-label="Previous Slide">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExample"
                    data-bs-slide="next" aria-label="Next Slide">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>

            <div class="news-strip mt-4" data-aos="fade-right" data-aos-delay="300">
                📢 New Books | AI Assistant | Library Week Events!
            </div>

            <section class="stats-row" aria-label="Library Statistics" data-aos="fade-up" data-aos-delay="400">
                <div class="stat-card">📚 Total Books<br /><strong>{{ stats.total_books }}</strong></div>
                <div class="stat-card">👥 Students<br /><strong>{{ stats.total_students }}</strong></div>
                <div class="stat-card">📅 Today Issued<br /><strong>{{ stats.today_issues }}</strong></div>
                <div class="stat-card">⏳ Overdue<br /><strong>{{ stats.total_overdue }}</strong></div>
            </section>

            <section class="latest-section" data-aos="fade-up" data-aos-delay="500" aria-label="Latest Books">
                <h3>🆕 Latest Books</h3>
                {% for book in latest_books %}
                <div class="latest-item" tabindex="0" role="listitem">📘 {{ book.title }} by {{ book.author }} (Acc: {{
                    book.accession_no }})</div>
                {% else %}
                <p>No recent books added.</p>
                {% endfor %}
            </section>

            <section class="latest-section" data-aos="fade-up" data-aos-delay="600" aria-label="New Accounts">
                <h3>👤 New Accounts</h3>
                {% for user in latest_accounts %}
                <div class="latest-item" tabindex="0" role="listitem">👤 {{ user.name }} | Class: {{ user.class }} | No:
                    {{ user.account_no }}</div>
                {% else %}
                <p>No new accounts created recently.</p>
                {% endfor %}
            </section>

            <section class="latest-section" data-aos="fade-up" data-aos-delay="700" aria-label="Recent Issues">
                <h3>📅 Recent Issues</h3>
                {% for i in latest_issues %}
                <div class="latest-item" tabindex="0" role="listitem">📗 {{ i.title }} by {{ i.author }}</div>
                {% else %}
                <p>No recent book issues.</p>
                {% endfor %}
            </section>

            <section class="latest-section" data-aos="fade-up" data-aos-delay="800" aria-label="Overdue Books">
                <h3>⏳ Overdue Books</h3>
                {% for o in overdue_books %}
                <div class="latest-item" tabindex="0" role="listitem">⚠️ {{ o.book_title }} ({{ o.name }}) – Due: {{
                    o.due_date }}</div>
                {% else %}
                <p>No overdue books at this time.</p>
                {% endfor %}
            </section>
        </main>
    </div>

    <div class="floating-search" role="search">
        <form method="GET" action="/search">
            <input type="search" name="q" class="form-control" placeholder="🔍 Search Books..."
                aria-label="Search Books" />
        </form>
    </div>

    <button class="fab" aria-label="Scroll to Top" title="Scroll to Top"
        onclick="window.scrollTo({ top: 0, behavior: 'smooth' })">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Footer -->
    <footer>
        📍 Renigunta Air Bypass Road, Tirupati<br />
        📞 9000738710 | ✉️ chinmayavidyalayatpt2@gmail.com<br />
        <div style="margin-top: 10px;">
            <div>
                <a href="https://www.instagram.com/chinmayavidyalayatirupati" target="_blank" style="color:#e4405f;">
                    <i class="fab fa-instagram fa-2x"></i>
                </a>
                <a href="https://www.facebook.com/ChinmayaVidyalayaTirupati" target="_blank" style="color:#3b5998;">
                    <i class="fab fa-facebook fa-2x"></i>
                </a>
                <div class="contact-section">
                    <div class="container contact-links">
                        <div class="contact-item"><i class="bi bi-globe"></i> <a href="https://chinmayavidyalaya.org"
                                target="_blank">www.chinmayavidyalaya.org</a></div>
                        <div class="contact-item"><i class="bi bi-telephone-fill"></i> +91 94401 23456</div>
                        <div class="contact-item"><i class="bi bi-envelope-fill"></i> <a
                                href="mailto:chinmayavidyalayatpt@gmail.com">chinmayavidyalayatpt@gmail.com</a></div>
                        <div class="contact-item"><i class="bi bi-facebook"></i> <a
                                href="https://facebook.com/ChinmayaVidyalayaTirupati"
                                target="_blank">facebook.com/ChinmayaVidyalayaTirupati</a></div>
                        <div class="contact-item"><i class="bi bi-instagram"></i> <a
                                href="https://instagram.com/chinmayavidyalayatirupati"
                                target="_blank">instagram.com/chinmayavidyalayatirupati</a></div>
                    </div>&copy; 2025 Chinmaya Smart Library | Designed by Suresh Sir.
    </footer>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
<!-- AOS JS -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init();

    // Real-time Date & Greeting
    setInterval(() => {
        const now = new Date();
        const hours = now.getHours();
        const greeting = hours < 12 ? 'Good Morning!' : hours < 18 ? 'Good Afternoon!' : 'Good Evening!';
        document.getElementById('datetime').innerText = `${greeting} – ${now.toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' })}`;
    }, 1000);
</script>
</body>

</html>